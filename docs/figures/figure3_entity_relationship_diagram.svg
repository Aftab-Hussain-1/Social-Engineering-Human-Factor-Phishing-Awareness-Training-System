<svg width="1000" height="800" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font-family: Arial, sans-serif; font-size: 18px; font-weight: bold; text-anchor: middle; }
      .entity-name { font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; text-anchor: middle; }
      .attribute { font-family: Arial, sans-serif; font-size: 10px; }
      .primary-key { font-family: Arial, sans-serif; font-size: 10px; font-weight: bold; text-decoration: underline; }
      .entity-box { fill: #e3f2fd; stroke: #1976d2; stroke-width: 2; }
      .relationship { fill: #fff3e0; stroke: #ff9800; stroke-width: 2; }
      .connection { stroke: #333; stroke-width: 1.5; fill: none; }
      .cardinality { font-family: Arial, sans-serif; font-size: 9px; text-anchor: middle; }
    </style>
  </defs>
  
  <!-- Title -->
  <text x="500" y="30" class="title">Figure 3: Entity Relationship Diagram</text>
  
  <!-- User Entity -->
  <rect x="50" y="80" width="150" height="180" class="entity-box"/>
  <text x="125" y="100" class="entity-name">User</text>
  <line x1="50" y1="110" x2="200" y2="110" stroke="#1976d2" stroke-width="1"/>
  <text x="60" y="130" class="primary-key">id (PK)</text>
  <text x="60" y="145" class="attribute">username</text>
  <text x="60" y="160" class="attribute">email</text>
  <text x="60" y="175" class="attribute">password_hash</text>
  <text x="60" y="190" class="attribute">role</text>
  <text x="60" y="205" class="attribute">created_at</text>
  <text x="60" y="220" class="attribute">last_login</text>
  <text x="60" y="235" class="attribute">is_active</text>
  <text x="60" y="250" class="attribute">reset_token</text>
  
  <!-- Question Entity -->
  <rect x="300" y="80" width="150" height="160" class="entity-box"/>
  <text x="375" y="100" class="entity-name">Question</text>
  <line x1="300" y1="110" x2="450" y2="110" stroke="#1976d2" stroke-width="1"/>
  <text x="310" y="130" class="primary-key">id (PK)</text>
  <text x="310" y="145" class="attribute">question_text</text>
  <text x="310" y="160" class="attribute">option_a</text>
  <text x="310" y="175" class="attribute">option_b</text>
  <text x="310" y="190" class="attribute">option_c</text>
  <text x="310" y="205" class="attribute">option_d</text>
  <text x="310" y="220" class="attribute">correct_answer</text>
  <text x="310" y="235" class="attribute">category</text>
  
  <!-- Quiz Attempt Entity -->
  <rect x="550" y="80" width="150" height="140" class="entity-box"/>
  <text x="625" y="100" class="entity-name">QuizAttempt</text>
  <line x1="550" y1="110" x2="700" y2="110" stroke="#1976d2" stroke-width="1"/>
  <text x="560" y="130" class="primary-key">id (PK)</text>
  <text x="560" y="145" class="attribute">user_id (FK)</text>
  <text x="560" y="160" class="attribute">score</text>
  <text x="560" y="175" class="attribute">total_questions</text>
  <text x="560" y="190" class="attribute">time_taken</text>
  <text x="560" y="205" class="attribute">completed_at</text>
  
  <!-- Quiz Response Entity -->
  <rect x="750" y="80" width="150" height="140" class="entity-box"/>
  <text x="825" y="100" class="entity-name">QuizResponse</text>
  <line x1="750" y1="110" x2="900" y2="110" stroke="#1976d2" stroke-width="1"/>
  <text x="760" y="130" class="primary-key">id (PK)</text>
  <text x="760" y="145" class="attribute">attempt_id (FK)</text>
  <text x="760" y="160" class="attribute">question_id (FK)</text>
  <text x="760" y="175" class="attribute">user_answer</text>
  <text x="760" y="190" class="attribute">is_correct</text>
  <text x="760" y="205" class="attribute">response_time</text>
  
  <!-- Risk Behavior Entity -->
  <rect x="50" y="350" width="150" height="160" class="entity-box"/>
  <text x="125" y="370" class="entity-name">RiskBehavior</text>
  <line x1="50" y1="380" x2="200" y2="380" stroke="#1976d2" stroke-width="1"/>
  <text x="60" y="400" class="primary-key">id (PK)</text>
  <text x="60" y="415" class="attribute">user_id (FK)</text>
  <text x="60" y="430" class="attribute">url</text>
  <text x="60" y="445" class="attribute">behavior_type</text>
  <text x="60" y="460" class="attribute">risk_level</text>
  <text x="60" y="475" class="attribute">timestamp</text>
  <text x="60" y="490" class="attribute">user_agent</text>
  
  <!-- Behavior Report Entity -->
  <rect x="300" y="350" width="150" height="140" class="entity-box"/>
  <text x="375" y="370" class="entity-name">BehaviorReport</text>
  <line x1="300" y1="380" x2="450" y2="380" stroke="#1976d2" stroke-width="1"/>
  <text x="310" y="400" class="primary-key">id (PK)</text>
  <text x="310" y="415" class="attribute">user_id (FK)</text>
  <text x="310" y="430" class="attribute">report_date</text>
  <text x="310" y="445" class="attribute">risk_score</text>
  <text x="310" y="460" class="attribute">recommendations</text>
  <text x="310" y="475" class="attribute">generated_at</text>
  
  <!-- Audit Log Entity -->
  <rect x="550" y="350" width="150" height="160" class="entity-box"/>
  <text x="625" y="370" class="entity-name">AuditLog</text>
  <line x1="550" y1="380" x2="700" y2="380" stroke="#1976d2" stroke-width="1"/>
  <text x="560" y="400" class="primary-key">id (PK)</text>
  <text x="560" y="415" class="attribute">user_id (FK)</text>
  <text x="560" y="430" class="attribute">action</text>
  <text x="560" y="445" class="attribute">resource</text>
  <text x="560" y="460" class="attribute">timestamp</text>
  <text x="560" y="475" class="attribute">ip_address</text>
  <text x="560" y="490" class="attribute">user_agent</text>
  
  <!-- Phishing URL Entity -->
  <rect x="750" y="350" width="150" height="140" class="entity-box"/>
  <text x="825" y="370" class="entity-name">PhishingURL</text>
  <line x1="750" y1="380" x2="900" y2="380" stroke="#1976d2" stroke-width="1"/>
  <text x="760" y="400" class="primary-key">id (PK)</text>
  <text x="760" y="415" class="attribute">url</text>
  <text x="760" y="430" class="attribute">category</text>
  <text x="760" y="445" class="attribute">threat_level</text>
  <text x="760" y="460" class="attribute">added_date</text>
  <text x="760" y="475" class="attribute">is_active</text>
  
  <!-- Relationships -->
  <!-- User to QuizAttempt (1:M) -->
  <line x1="200" y1="150" x2="550" y2="150" class="connection"/>
  <text x="375" y="145" class="cardinality">1</text>
  <text x="530" y="145" class="cardinality">M</text>
  
  <!-- QuizAttempt to QuizResponse (1:M) -->
  <line x1="700" y1="150" x2="750" y2="150" class="connection"/>
  <text x="710" y="145" class="cardinality">1</text>
  <text x="740" y="145" class="cardinality">M</text>
  
  <!-- Question to QuizResponse (1:M) -->
  <line x1="450" y1="160" x2="750" y2="160" class="connection"/>
  <text x="460" y="155" class="cardinality">1</text>
  <text x="740" y="155" class="cardinality">M</text>
  
  <!-- User to RiskBehavior (1:M) -->
  <line x1="125" y1="260" x2="125" y2="350" class="connection"/>
  <text x="115" y="305" class="cardinality">1</text>
  <text x="115" y="340" class="cardinality">M</text>
  
  <!-- User to BehaviorReport (1:M) -->
  <line x1="200" y1="200" x2="300" y2="420" class="connection"/>
  <text x="210" y="195" class="cardinality">1</text>
  <text x="290" y="425" class="cardinality">M</text>
  
  <!-- User to AuditLog (1:M) -->
  <line x1="200" y1="180" x2="550" y2="420" class="connection"/>
  <text x="210" y="175" class="cardinality">1</text>
  <text x="540" y="425" class="cardinality">M</text>
  
  <!-- RiskBehavior to PhishingURL (M:1) -->
  <line x1="200" y1="430" x2="750" y2="430" class="connection"/>
  <text x="210" y="425" class="cardinality">M</text>
  <text x="740" y="425" class="cardinality">1</text>
  
  <!-- Legend -->
  <rect x="50" y="600" width="200" height="120" fill="#f5f5f5" stroke="#333" stroke-width="1"/>
  <text x="150" y="620" class="entity-name">Legend</text>
  <text x="60" y="640" class="primary-key">PK = Primary Key</text>
  <text x="60" y="655" class="attribute">FK = Foreign Key</text>
  <text x="60" y="670" class="attribute">1 = One</text>
  <text x="60" y="685" class="attribute">M = Many</text>
  <rect x="60" y="695" width="15" height="10" class="entity-box"/>
  <text x="80" y="705" class="attribute">Entity</text>
</svg>